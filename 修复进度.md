# ThoughtEcho 修复进度

日期：2026-01-24

## 状态说明
- ⬜ 未开始
- 🟡 进行中
- ✅ 已完成

## P0 数据完整性 / 数据丢失风险
- ⬜ 1) quickCheckAndDeleteIfOrphan 仅查引用表
- ⬜ 2) 同步/恢复后未重建媒体引用
- ⬜ 3) updateQuote 引用同步在事务外
- ⬜ 4) 备份媒体仅依赖引用表
- ⬜ 5) 超大 Delta 跳过路径转换
- ⬜ 6) 自动草稿保存缺失

## P1 稳定性 / OOM / 性能风险
- ⬜ 1) 全量加载 + 主线程解析
- ⬜ 2) 全量导出 + writeAsString
- ⬜ 3) writeAsString 直接写大内容
- ⬜ 4) 迁移逻辑主线程循环
- ⬜ 5) 编辑保存过程主线程重计算
- ⬜ 6) dispose 清理全部临时文件
- ⬜ 7) 孤儿扫描全量加载

## P2 隐私 / 日志风险
- ⬜ LocalSend 输出敏感响应

## 部分确认 / 条件成立
- ⬜ 路径规范化边界情况
- ⬜ 删除/引用并发竞态
- ⬜ SQL 注入风险
- ⬜ QuoteContent build 中 jsonDecode
